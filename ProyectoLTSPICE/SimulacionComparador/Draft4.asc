Version 4
SHEET 1 1716 680
WIRE 96 -1200 -384 -1200
WIRE 560 -1136 560 -1152
WIRE 624 -1136 560 -1136
WIRE 96 -1104 96 -1200
WIRE 96 -1056 96 -1104
WIRE 96 -1056 0 -1056
WIRE 208 -1056 96 -1056
WIRE -384 -1024 -384 -1200
WIRE -384 -1024 -480 -1024
WIRE -272 -1024 -384 -1024
WIRE 0 -976 0 -1056
WIRE 208 -976 208 -1056
WIRE -384 -944 -480 -944
WIRE -272 -944 -384 -944
WIRE -48 -896 -208 -896
WIRE 0 -896 -48 -896
WIRE 96 -896 0 -896
WIRE -208 -864 -208 -896
WIRE -48 -864 -48 -896
WIRE 96 -864 96 -896
WIRE -96 -784 -160 -784
WIRE -384 -752 -384 -944
WIRE -208 -752 -208 -768
WIRE -208 -752 -384 -752
WIRE -96 -752 -208 -752
WIRE -48 -752 -48 -768
WIRE -48 -752 -96 -752
WIRE 96 -752 96 -768
WIRE 96 -752 -48 -752
WIRE 208 -752 208 -896
WIRE 208 -752 96 -752
WIRE 800 -736 752 -736
WIRE -96 -720 -96 -752
WIRE 896 -720 864 -720
WIRE 960 -720 896 -720
WIRE 800 -704 752 -704
WIRE 960 -704 960 -720
WIRE 1008 -704 960 -704
WIRE 1200 -688 1072 -688
WIRE 1008 -672 960 -672
WIRE 1200 -672 1200 -688
WIRE -160 -640 -160 -784
WIRE 144 -640 144 -784
WIRE 144 -640 -160 -640
WIRE 368 -640 144 -640
WIRE 752 -576 752 -704
WIRE 768 -576 752 -576
WIRE 896 -576 896 -720
WIRE 896 -576 848 -576
WIRE 960 -576 960 -672
WIRE 992 -576 960 -576
WIRE 1200 -576 1200 -592
WIRE 1200 -576 1072 -576
WIRE 752 -560 752 -576
WIRE 960 -560 960 -576
WIRE -256 -528 -288 -528
WIRE -96 -512 -192 -512
WIRE -256 -496 -288 -496
WIRE 752 -480 672 -480
WIRE 960 -480 752 -480
WIRE -96 -464 -96 -512
WIRE 112 -464 -96 -464
WIRE 368 -464 368 -640
WIRE 368 -464 304 -464
WIRE 672 -448 672 -480
WIRE 112 -432 80 -432
WIRE 96 -320 48 -320
WIRE 176 -320 96 -320
WIRE -80 -288 -144 -288
WIRE -272 -272 -304 -272
WIRE 48 -272 48 -320
WIRE 48 -272 -16 -272
WIRE 176 -272 176 -320
WIRE 208 -272 208 -320
WIRE 208 -272 176 -272
WIRE -144 -256 -144 -288
WIRE -144 -256 -208 -256
WIRE -80 -256 -112 -256
WIRE -272 -240 -304 -240
WIRE -304 -224 -304 -240
WIRE -112 -208 -112 -256
WIRE 368 -208 368 -464
WIRE 368 -208 -112 -208
FLAG 672 -448 0
FLAG 816 -688 V+
IOPIN 816 -688 BiDir
FLAG 1024 -656 V+
IOPIN 1024 -656 BiDir
FLAG 816 -752 V-
IOPIN 816 -752 BiDir
FLAG 1024 -720 V-
IOPIN 1024 -720 BiDir
FLAG 1200 -576 Vout
IOPIN 1200 -576 BiDir
FLAG 560 -1232 V+
IOPIN 560 -1232 Out
FLAG 560 -1056 V-
IOPIN 560 -1056 Out
FLAG 624 -1136 0
FLAG 848 -752 V+
IOPIN 848 -752 BiDir
FLAG 1056 -720 V+
IOPIN 1056 -720 BiDir
FLAG 96 -1104 Vt
IOPIN 96 -1104 BiDir
FLAG 752 -816 Vt
IOPIN 752 -816 BiDir
FLAG -96 -720 0
FLAG 80 -352 0
FLAG 1200 -688 Vref
IOPIN 1200 -688 BiDir
FLAG -288 -496 Vref
IOPIN -288 -496 BiDir
FLAG -288 -608 0
FLAG -224 -544 V+
IOPIN -224 -544 BiDir
FLAG -240 -288 V+
IOPIN -240 -288 BiDir
FLAG -304 -272 Vref
IOPIN -304 -272 BiDir
FLAG -304 -144 0
FLAG 368 -464 Vset
FLAG -240 -224 0
FLAG -224 -480 0
FLAG -208 -480 0
FLAG -224 -224 0
FLAG 96 -240 0
SYMBOL OpAmps\\MAX4239 832 -736 M180
WINDOW 0 -18 132 Left 2
WINDOW 3 -54 105 Left 2
SYMATTR InstName U1
SYMBOL OpAmps\\MAX4239 1040 -704 M180
WINDOW 0 -34 137 Left 2
WINDOW 3 -63 107 Left 2
SYMATTR InstName U2
SYMBOL res 1088 -592 R90
WINDOW 0 78 53 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 9k
SYMBOL res 976 -464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 864 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 9k
SYMBOL res 768 -464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1216 -576 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 50k
SYMBOL voltage 560 -1248 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3
SYMBOL res 736 -832 R0
SYMATTR InstName R6
SYMATTR Value 270
SYMBOL voltage 560 -1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3
SYMBOL res -16 -992 R0
SYMATTR InstName mA
SYMATTR Value 10m
SYMBOL res 192 -992 R0
SYMATTR InstName uA
SYMATTR Value 10
SYMBOL ZZZ\\LOGIC\\74HC\\74hc74 208 -544 R0
SYMATTR InstName U5
SYMATTR SpiceLine VCC=3  SPEED=1.0  TRIPDT=1e-9
SYMBOL voltage 80 -448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName V4
SYMATTR Value PULSE(0 3 0 1n 1n 0.1m 0.2m)
SYMBOL voltage -288 -512 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 2.5
SYMBOL voltage -304 -240 R0
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 3m
SYMBOL ZZZ\\OpAmp\\TLV3501 -224 -576 R0
SYMATTR InstName U4
SYMBOL ZZZ\\OpAmp\\TLV3501 -240 -320 R0
SYMATTR InstName U3
SYMBOL nmos -96 -864 R0
SYMATTR InstName M1
SYMBOL nmos 144 -864 M0
SYMATTR InstName M2
SYMBOL res 80 -336 R0
SYMATTR InstName R7
SYMATTR Value 220
SYMBOL nmos -160 -864 M0
SYMATTR InstName M3
SYMBOL ZZZ\\LOGIC\\DigitalLogic\\NAND_2 -48 -272 R0
SYMATTR InstName U7
SYMBOL current -480 -944 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I3
SYMATTR Value PULSE(40u 200u 0 1p 1p 8m 16m 1)
SYMBOL current -384 -944 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(200u 600u 8m 1p 1p 8m 16m 1)
SYMBOL current -272 -944 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value PULSE(20m 300m 16m 1p 1p 8m 16m 1)
TEXT -416 184 Left 2 !.param V=3.3 I=20m
TEXT -416 216 Left 2 !.param R={V/I}
TEXT -32 176 Left 2 !.model NMOS NMOS (Vto=1.2 Kp=500 Rd=0.0003 Rs=0.0001 Rg=1 Vds=40 Ron=0.001)
TEXT -408 0 Left 2 !.tran 32m
