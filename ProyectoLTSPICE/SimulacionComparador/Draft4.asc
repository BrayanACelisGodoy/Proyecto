Version 4
SHEET 1 1716 680
WIRE -64 -1216 -400 -1216
WIRE -64 -1152 -64 -1216
WIRE -400 -1040 -400 -1216
WIRE -64 -1040 -64 -1072
WIRE -64 -992 -64 -1040
WIRE -64 -992 -160 -992
WIRE 48 -992 -64 -992
WIRE -160 -912 -160 -992
WIRE 48 -912 48 -992
WIRE -400 -688 -400 -960
WIRE -256 -688 -400 -688
WIRE 48 -688 48 -832
WIRE 48 -688 -256 -688
WIRE -256 -656 -256 -688
WIRE 944 -592 944 -608
WIRE 1008 -592 944 -592
WIRE -304 -384 -336 -384
WIRE -144 -368 -240 -368
WIRE -144 -320 -144 -368
WIRE 64 -320 -144 -320
WIRE 320 -320 256 -320
WIRE 832 -272 784 -272
WIRE 928 -256 896 -256
WIRE 992 -256 928 -256
WIRE 832 -240 784 -240
WIRE 992 -240 992 -256
WIRE 1040 -240 992 -240
WIRE 1232 -224 1104 -224
WIRE 1040 -208 992 -208
WIRE 1232 -208 1232 -224
WIRE -128 -144 -192 -144
WIRE 160 -128 160 -176
WIRE 160 -128 -64 -128
WIRE -192 -112 -192 -144
WIRE -192 -112 -256 -112
WIRE -128 -112 -160 -112
WIRE 784 -112 784 -240
WIRE 800 -112 784 -112
WIRE 928 -112 928 -256
WIRE 928 -112 880 -112
WIRE 992 -112 992 -208
WIRE 1024 -112 992 -112
WIRE 1232 -112 1232 -128
WIRE 1232 -112 1104 -112
WIRE -320 -96 -352 -96
WIRE 784 -96 784 -112
WIRE 992 -96 992 -112
WIRE -352 -80 -352 -96
WIRE -160 -64 -160 -112
WIRE 176 -64 -160 -64
WIRE 208 -64 176 -64
WIRE 320 -64 320 -320
WIRE 320 -64 288 -64
WIRE 336 -64 320 -64
WIRE 176 -48 176 -64
WIRE 784 -16 704 -16
WIRE 992 -16 784 -16
WIRE 704 16 704 -16
WIRE 176 64 176 32
FLAG 704 16 0
FLAG 848 -224 V+
IOPIN 848 -224 BiDir
FLAG 1056 -192 V+
IOPIN 1056 -192 BiDir
FLAG 848 -288 V-
IOPIN 848 -288 BiDir
FLAG 1056 -256 V-
IOPIN 1056 -256 BiDir
FLAG 1232 -112 Vout
IOPIN 1232 -112 BiDir
FLAG 944 -688 V+
IOPIN 944 -688 Out
FLAG 944 -512 V-
IOPIN 944 -512 Out
FLAG 1008 -592 0
FLAG 880 -288 V+
IOPIN 880 -288 BiDir
FLAG 1088 -256 V+
IOPIN 1088 -256 BiDir
FLAG -64 -1040 Vt
IOPIN -64 -1040 BiDir
FLAG 784 -352 Vt
IOPIN 784 -352 BiDir
FLAG -256 -656 0
FLAG 64 -208 0
FLAG 1232 -224 Vref
IOPIN 1232 -224 BiDir
FLAG -304 -352 Vref
IOPIN -304 -352 BiDir
FLAG -336 -464 0
FLAG -272 -400 V+
IOPIN -272 -400 BiDir
FLAG -272 -336 0
FLAG -288 -144 V+
IOPIN -288 -144 BiDir
FLAG -288 -80 0
FLAG -320 -128 Vref
IOPIN -320 -128 BiDir
FLAG -352 0 0
FLAG 176 64 0
FLAG 320 -320 Vset
SYMBOL OpAmps\\MAX4239 864 -272 M180
WINDOW 0 -18 132 Left 2
WINDOW 3 -54 105 Left 2
SYMATTR InstName U1
SYMBOL OpAmps\\MAX4239 1072 -240 M180
WINDOW 0 -34 137 Left 2
WINDOW 3 -63 107 Left 2
SYMATTR InstName U2
SYMBOL res 1120 -128 R90
WINDOW 0 78 53 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 9k
SYMBOL res 1008 0 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 896 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 9k
SYMBOL res 800 0 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1248 -112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 50k
SYMBOL voltage 944 -704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3
SYMBOL res 768 -368 R0
SYMATTR InstName R6
SYMATTR Value 270
SYMBOL voltage 944 -608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3
SYMBOL voltage -400 -1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {V}
SYMBOL res -80 -1168 R0
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL res -176 -928 R0
SYMATTR InstName mA
SYMATTR Value 10m
SYMBOL res 32 -928 R0
SYMATTR InstName uA
SYMATTR Value 10
SYMBOL OpAmps\\AD822 -272 -432 R0
SYMATTR InstName U3
SYMBOL OpAmps\\AD822 -288 -176 R0
SYMATTR InstName U4
SYMBOL ZZZ\\LOGIC\\74HC\\74hc74 160 -400 R0
SYMATTR InstName U5
SYMBOL voltage 64 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 3 0 1n 1n 0.1m 0.2m)
SYMBOL voltage -336 -368 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 2.5
SYMBOL voltage -352 -96 R0
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 3m
SYMBOL res 304 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 192 48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 1.5k
SYMBOL ZZZ\\LOGIC\\DigitalLogic\\NAND_2 -96 -128 R0
SYMATTR InstName U7
TEXT 736 -1112 Left 2 !.op
TEXT 680 -1216 Left 2 !.param V=3.3 I=400u
TEXT 696 -1168 Left 2 !.param R={V/I}
TEXT 320 -856 Left 2 !.model NMOS NMOS (Vto=0.85 Rd=0.001 Rs=0.001 Rg=1 Kp=20m Rds=0.1m Vds=30)
